<!-- standard is the version that we can define the way we want (uploaders->photo_uploader.rb) -->

<% @posts.each do |post| %>

	<div class="card mt-3 post">
		
    <!-- username/user avatar/delete options -->	
		<div class="card-header d-flex align-items-center">
			<%=  link_to user_path(post.user), class: "no-text-decoration" do %>
				<%= image_tag avatar_url(post.user), class: "post-author-icon" %>
			<% end %>

			<%= link_to user_path(post.user), class: "normal-color no-text-decoration", title: post.user.name do%>
				<strong><%= post.user.name %></strong>
			<% end %>
    <!-- show the delete post icon only when signed in user is the owner of the post. is_belongs_to is a method defined in post.rb model file -->
			<% if post.is_belongs_to? current_user %>
		        <%= link_to post_path(post), method: :delete, class: "ml-auto delete-post-icon mx-0 my-auto" do %>
		          <i class="far fa-trash-alt" aria-hidden="true"></i>
		        <% end %>
	      	<% end %>
		</div>


<!----------------------- DISPLAY PHOTOS USING BOOTSTRAP MODAL----------------------------------------------------------------------- -->

	<% if post.photos.size == 1 %>
		<%= image_tag post.photos.first.image.url(:standard), class: "card-img-top" %>
	<% else %>
		<div id="carousel-post-<%=post.id %>" class="carousel slide" data-ride="false">
			<div class="carousel-inner">
				<% post.photos.each do |photo| %>
					<% if photo == post.photos.first %>
						<div class="carousel-item active">
					<% else %>
						<div class="carousel-item">
					<% end %>
						<%= image_tag photo.image.url(:standard), class: "card-img-top"  %>
					    </div>
				<% end %>

						  <a class="carousel-control-prev" href="#carousel-post-<%=post.id %>" role="button" data-slide="prev">
						    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
						    <span class="sr-only">Previous</span>
						  </a>
						  <a class="carousel-control-next" href="#carousel-post-<%=post.id %>" role="button" data-slide="next">
						    <span class="carousel-control-next-icon" aria-hidden="true"></span>
						    <span class="sr-only">Next</span>
						  </a>
	    				</div>
	<% end %>


		<!-- --------------------------------------------------LIKE/COMMENT/BOOKMARK----------------------------------------------------------------- -->

			<div class="card-body">
				<div class="row-actions" style="display: flex; margin-top: 3%;margin-bottom: 3%;">
					<a href="#", class="core-sprite love hide-text">Love</a>
					<a href="#", class="core-sprite comment hide-text">Comment</a>
					<a href="#", class="core-sprite bookmark hide-text ml-auto">Bookmark</a>
				</div>
				<div><strong><%= pluralize(16, "like") %></strong></div>
				<div>
					<span><strong><%= post.user.name %></strong></span>
					<span><%= post.content %></span>
				</div>
				<!-- <div class="light-color post-time"><%= time_ago_in_words(post.created_at).upcase %> AGO </div> -->
				<%= link_to time_ago_in_words(post.created_at).upcase + " AGO ", post_path(post), class: "light-color post-time no-text-decoration"%>
				<hr>
				<div class="row actions">
					<form action="#" class="w-100">
						<div>
							<textarea class="form-control comment-input border-0" placeholder="Add a comment ..." rows="1"></textarea>
						</div>
					</form>
				</div>
			</div>

		</div>

<% end %>